import{L as e,T as t,j as n,S as s,B as r,R as o,F as l,a as i,b as a,c,d,s as m}from"./.pnpm-Da4wYp1c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const{Header:h}=e,{Title:u}=t,g=()=>n.jsx(h,{className:"header",children:n.jsx(u,{level:4,style:{margin:0,color:"#000"},children:"SVG在线编辑器"})}),x=({onLoadExample:e,onCopy:t,onDownload:o,onToggleHistory:l,onClearHistory:i,showHistory:a})=>n.jsx("div",{className:"toolbar",children:n.jsxs(s,{children:[n.jsx(r,{onClick:()=>e("circle"),children:"圆形示例"}),n.jsx(r,{onClick:()=>e("rect"),children:"矩形示例"}),n.jsx(r,{onClick:()=>e("path"),children:"路径示例"}),n.jsx(r,{onClick:t,children:"复制代码"}),n.jsx(r,{onClick:o,children:"下载SVG"}),n.jsx(r,{onClick:l,children:a?"关闭历史":"查看历史"}),a&&n.jsx(r,{onClick:i,children:"清空历史"})]})}),v=({value:e,onChange:t,defaultValue:s})=>{const[r,i]=React.useState(null);return n.jsxs("div",{className:"editor-container",children:[n.jsx("div",{className:"format-button",onClick:()=>{return r&&void((e=r)&&(null==e?void 0:e.getAction)&&(null==(t=null==e?void 0:e.getAction("editor.action.formatDocument"))||t.run()));var e,t},children:n.jsx(o,{})}),n.jsx(l,{height:"100%",defaultLanguage:"xml",defaultValue:s,value:e,onChange:t,theme:"vs-light",onMount:(e,t)=>{e&&(i(e),null==r||r.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyZ,(()=>{null==r||r.trigger("undo","undo",null)})),null==r||r.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyY,(()=>{null==r||r.trigger("redo","redo",null)})))},options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",formatOnPaste:!0,formatOnType:!0}})]})},y=({error:e,svgCode:t,scale:o,onScaleChange:l})=>{const[m,h]=React.useState(!0);return n.jsxs("div",{className:"preview-container",children:[n.jsxs(s,{className:"preview-controls",children:[n.jsx(r,{icon:n.jsx(i,{}),onClick:()=>l(1.2*o)}),n.jsx(r,{icon:n.jsx(a,{}),onClick:()=>l(o/1.2)}),n.jsx(r,{icon:n.jsx(c,{}),onClick:()=>l(1)}),n.jsx(d,{checkedChildren:"显示网格",unCheckedChildren:"隐藏网格",defaultChecked:!0,onChange:h})]}),e?n.jsx("div",{className:"error-message",children:e}):n.jsx("div",{className:"preview-area",children:n.jsx("div",{className:"svg-preview "+(m?"with-grid":""),style:{transform:`scale(${o})`,transformOrigin:"center center",transition:"transform 0.2s",display:"flex",justifyContent:"center",alignItems:"center",overflow:"auto"},dangerouslySetInnerHTML:{__html:t}})})]})},{Title:f}=t,j=({history:e,onSelect:t})=>n.jsxs("div",{className:"history-list",children:[n.jsx(f,{level:5,children:"历史记录"}),0===e.length?n.jsx("p",{children:"暂无历史记录"}):e.map((e=>n.jsxs("div",{className:"history-item",onClick:()=>t(e),children:[n.jsx("div",{className:"history-preview",dangerouslySetInnerHTML:{__html:e.code}}),n.jsx("div",{className:"history-time",children:new Date(e.timestamp).toLocaleString()})]},e.id)))]}),{Content:p}=e,C='<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n  <circle cx="100" cy="100" r="50" fill="#ff0000"/>\n</svg>',w={circle:C,rect:'<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n  <rect x="50" y="50" width="100" height="100" fill="#0000ff"/>\n</svg>',path:'<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">\n  <path d="M50,50 L150,50 L100,150 Z" fill="#00ff00"/>\n</svg>'};function S(){const[t,s]=React.useState(C),[r,o]=React.useState(null),[l,i]=React.useState(1),[a,c]=React.useState([]),[d,h]=React.useState(!1);React.useEffect((()=>{const e=localStorage.getItem("svgHistory");e&&c(JSON.parse(e))}),[]);return n.jsxs(e,{className:"app-container",children:[n.jsx(g,{}),n.jsx(x,{onLoadExample:e=>{s(w[e]),o(null)},onCopy:async()=>{try{await navigator.clipboard.writeText(t),m.success("代码已复制到剪贴板")}catch(e){m.error("复制失败："+e)}},onDownload:()=>{const e=new Blob([t],{type:"image/svg+xml"}),n=URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download="image.svg",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},onToggleHistory:()=>h(!d),onClearHistory:()=>{c([]),localStorage.removeItem("svgHistory"),h(!1)},showHistory:d}),n.jsxs(p,{className:"main-content",children:[n.jsx(v,{value:t,onChange:e=>{if(e){s(e);try{const t=(new DOMParser).parseFromString(e,"image/svg+xml");t.querySelector("parsererror")?o("SVG代码格式错误"):(o(null),(e=>{const t=[{id:Date.now().toString(),code:e,timestamp:Date.now()},...a].slice(0,10);c(t),localStorage.setItem("svgHistory",JSON.stringify(t))})(e))}catch(t){o("SVG代码解析失败："+t)}}},defaultValue:C}),n.jsx(y,{error:r,svgCode:t,scale:l,onScaleChange:i}),d&&n.jsx(j,{history:a,onSelect:e=>{s(e.code),o(null),h(!1)}})]})]})}ReactDOM.createRoot(document.getElementById("root")).render(n.jsx(React.StrictMode,{children:n.jsx(S,{})}));
